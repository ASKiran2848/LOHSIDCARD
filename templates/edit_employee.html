{% extends "base.html" %}
{% block title %}Edit Employee{% endblock %}

{% block content %}
<h1>Edit Employee â€“ {{ employee_id }}</h1>

{% if message %}
<div class="msg">{{ message }}</div>
{% endif %}

<form method="POST">
    <label>Name</label>
    <input type="text" name="name" value="{{ employee['Name'] }}" required>

    <label>Date of Birth</label>
    <input type="text" name="dob" 
           value="{{ employee['Date of Birth'] | datetimeformat }}" 
           placeholder="dd/mm/yyyy" 
           pattern="\d{2}/\d{2}/\d{4}" 
           required>

    <label>Gender</label>
    <select name="gender" required>
        <option value="Male" {% if employee['Gender']=='Male' %}selected{% endif %}>Male</option>
        <option value="Female" {% if employee['Gender']=='Female' %}selected{% endif %}>Female</option>
        <option value="Other" {% if employee['Gender']=='Other' %}selected{% endif %}>Other</option>
    </select>

    <hr>
    <h3>Emergency Details</h3>

    <label>Blood Group</label>
    <input type="text" name="blood_group" value="{{ employee['Emergency Details']['Blood group'] }}" required>

    <label>Contact Person Name</label>
    <input type="text" name="contact_person_name" value="{{ employee['Emergency Details']['Contact Person Name'] }}" required>

    <label>Relation</label>
    <input type="text" name="relation" value="{{ employee['Emergency Details']['Relation'] }}" required>

    <label>Phone Number</label>
    <input type="text" name="phone_number" value="{{ employee['Emergency Details']['Phone Number'] }}" required>

    <label>Company Phone Number</label>
    <input type="text" name="company_phone_number" value="{{ employee['Emergency Details']['Company Phone Number'] }}" required>

    <button type="submit">Save Changes</button>
</form>

<div class="qr-container">
    <h3>Current QR Code</h3>
    {% if qr_base64 %}
        <img src="{{ qr_base64 }}" width="200">
    {% else %}
        <p>No QR available.</p>
    {% endif %}
    <br><br>
    {% if qr_url %}
        <a href="{{ qr_url }}" target="_blank">Download QR (Cloudinary)</a>
    {% endif %}
</div>
{% endblock %}
