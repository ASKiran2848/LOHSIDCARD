<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit Employee â€“ {{ employee_id }}</title>
    <link rel="icon" type="image/png" href="{{ url_for('static', filename='images/company_logo.jpg') }}">
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; background: #f9f9f9; }
        input, select { width: 100%; padding: 8px; margin: 6px 0; border-radius: 5px; border: 1px solid #ccc; }
        button { padding: 10px 20px; background: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer; }
        button:hover { background: #0056b3; }
        .msg { padding: 10px; background: #d4edda; color: #155724; margin-top: 15px; border-radius: 5px; }
        .qr-container { margin-top: 20px; }
        .navbar { background: #1a1a2e; padding: 12px 20px; color: white; display: flex; justify-content: space-between; align-items: center; position: sticky; top: 0; z-index: 1000; }
        .nav-links a { color: white; margin-left: 15px; text-decoration: none; padding: 6px 10px; border-radius: 5px; transition: 0.25s; }
        .nav-links a:hover { background: rgba(255,255,255,0.2); }
        hr { margin: 20px 0; border: 0; border-top: 1px solid #ccc; }
        h3 { margin-top: 15px; }
        .btn { padding: 8px 14px; background: #007bff; color: white; text-decoration: none; border-radius: 5px; }
        .btn:hover { background: #0056b3; }
    </style>
</head>
<body>

<!-- Navbar -->
<div class="navbar">
    <div>Emergency System</div>
    <div class="nav-links">
        <a href="{{ url_for('index') }}">ðŸ‘¥ Employee List</a>
        <a href="{{ url_for('add_employee_page') }}">âž• Add Employee</a>
        <a href="{{ url_for('edit_employee_search') }}">ðŸš‘ Search/Edit Employee</a>
    </div>
</div>

<h1>Edit Employee â€“ {{ employee_id }}</h1>

{% if message %}
<div class="msg">{{ message }}</div>
{% endif %}

<form method="POST">
    <label>Name</label>
    <input type="text" name="name" value="{{ employee['Name'] }}" required>

    <label>Date of Birth</label>
    <input type="date" name="dob" value="{{ employee['Date of Birth'] }}" required>

    <label>Gender</label>
    <select name="gender" required>
        <option value="Male" {% if employee['Gender']=='Male' %}selected{% endif %}>Male</option>
        <option value="Female" {% if employee['Gender']=='Female' %}selected{% endif %}>Female</option>
        <option value="Other" {% if employee['Gender']=='Other' %}selected{% endif %}>Other</option>
    </select>

    <hr>
    <h3>Emergency Details</h3>

    <label>Blood Group</label>
    <input type="text" name="blood_group" value="{{ employee['Emergency Details']['Blood group'] }}" required>

    <label>Contact Person Name</label>
    <input type="text" name="contact_person_name" value="{{ employee['Emergency Details']['Contact Person Name'] }}" required>

    <label>Relation</label>
    <input type="text" name="relation" value="{{ employee['Emergency Details']['Relation'] }}" required>

    <label>Phone Number</label>
    <input type="text" name="phone_number" value="{{ employee['Emergency Details']['Phone Number'] }}" required>

    <label>Company Phone Number</label>
    <input type="text" name="company_phone_number" value="{{ employee['Emergency Details']['Company Phone Number'] }}" required>

    <button type="submit">Save Changes</button>
</form>

<div class="qr-container">
    <h3>Current QR Code</h3>
    {% if qr_base64 %}
        <img src="{{ qr_base64 }}" width="200">
    {% else %}
        <div class="msg" style="background:#f8d7da; color:#721c24;">No QR available.</div>
    {% endif %}
    <br><br>
    {% if qr_url %}
        <a class="btn" href="{{ qr_url }}" target="_blank">Download QR (Cloudinary)</a>
    {% endif %}
</div>

</body>
</html>
